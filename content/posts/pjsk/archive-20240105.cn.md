---
author: mos9527
lastmod: 2025-03-25T20:45:54.331000+08:00
title: Project SEKAI é€†å‘ - ç¬”è®°å½’æ¡£
tags: ["é€†å‘","Unity","UnityPy","Frida","PJSK","Project SEKAI","Blender","CG","3D","NPR","Python"]
categories: ["PJSK", "é€†å‘", "åˆé›†"]
ShowToc: true
TocOpen: true
typora-root-url: ../../../static
---

# Preface

*Cutoff: 24/01/05 Revision: 24/09/26*

å…¶å®åˆ†æå·¥ä½œä¸»è¦æ˜¯åœ¨æ­¤åæ‰çœŸæ­£èµ·æ­¥...ä¸è¿‡å®åœ¨æ‰¾ä¸åˆ°æ—¶é—´å†™å¸–å­orz

å¯¹æœ€æ–°çŸ¥è¯†æœ‰å…´è¶£æˆ–ä¹Ÿæƒ³å‚ä¸ç ”ç©¶çš„è¯ï¼Œè¿˜è¯·å‚é˜…ä»¥ä¸‹RepoåŠå…¶Wikiï¼š

- https://github.com/mos9527/sssekai
- https://github.com/mos9527/sssekai_blender_io

## Project SEKAI é€†å‘ï¼ˆ1ï¼‰ï¼š æ–‡ä»¶è§£å¯†åŠAPIåˆæ­¥é™æ€åˆ†æ

- åˆ†ævariantï¼šColorfulStage 2.4.1 ï¼ˆGoogle Play ç¾æœï¼‰

### 1. è§£å¯† metadata
**æ³¨ï¼š** ä¸é€‚ç”¨äºæ–°ç‰ˆæœ¬ï¼›è¯·å‚è§åæ–‡â€œåŠ¨æ€æå–â€
- åˆ©ç”¨ [Il2CppDumper](https://github.com/Perfare/Il2CppDumper) å¯¹apkä¸­æå–å‡ºæ¥çš„`global-metadata.data`å’Œ`il2cpp.so`ç›´æ¥åˆ†æï¼Œå¯è§è‡³å°‘`metadata`æœ‰æ··æ·†

![image-20231228181726715](/image-archive-20240105/image-20231228181726715.png)

- IDAé™æ€åˆ†æ`libunity.so`, å®šä½åˆ°exportçš„`il2cpp_init`ï¼›æ²¡æœ‰å‘ç°æœ‰å…³æ··æ·†çš„å¤„ç†

![image-20231228182008675](/image-archive-20240105/image-20231228182008675.png)

- è€ƒè™‘ç›´æ¥åˆ†æ`il2cpp.so`ï¼Œå®šä½åˆ°`global-metadata.dat`æœ‰å…³æµç¨‹

![image-20231228182229242](/image-archive-20240105/image-20231228182229242.png)

ä»è¿™é‡Œçš„xrefå¯ä»¥å¾ˆè½»æ¾çš„æ‘¸åˆ°Il2Cppçš„metadataåŠ è½½æµç¨‹

*(æ³¨ï¼šéƒ¨åˆ†å˜é‡å·²æ›´å)*

```c++
_BYTE *__fastcall MetadataLoader::LoadMetadataFile(char *a1)
{
  unsigned __int64 v2; // x8
  char *v3; // x9
  __int64 v4; // x0
  _BYTE *v5; // x8
  unsigned __int64 v6; // x9
  const char *v7; // x0
  int v8; // w21
  int v9; // w20
  _BYTE *mapped_metadata; // x19
  __int64 v11; // x8
  __int64 v13; // [xsp+0h] [xbp-E0h] BYREF
  unsigned __int64 v14; // [xsp+8h] [xbp-D8h]
  char *v15; // [xsp+10h] [xbp-D0h]
  size_t len[2]; // [xsp+30h] [xbp-B0h]
  __int64 v17[2]; // [xsp+80h] [xbp-60h] BYREF
  char *v18; // [xsp+90h] [xbp-50h]
  char *v19; // [xsp+98h] [xbp-48h] BYREF
  __int64 v20; // [xsp+A0h] [xbp-40h]
  unsigned __int8 v21; // [xsp+A8h] [xbp-38h]
  _BYTE v22[15]; // [xsp+A9h] [xbp-37h] BYREF
  _BYTE *v23; // [xsp+B8h] [xbp-28h]

  sub_17A953C();
  v19 = "Metadata";
  v20 = 8LL;
  v2 = (unsigned __int64)(unsigned __int8)v13 >> 1;
  if ( (v13 & 1) != 0 )
    v3 = v15;
  else
    v3 = (char *)&v13 + 1;
  if ( (v13 & 1) != 0 )
    v2 = v14;
  v17[0] = (__int64)v3;
  v17[1] = v2;
  sub_173B820(v17, &v19);
  if ( (v13 & 1) != 0 )
    operator delete(v15);
  v4 = strlen(a1);
  if ( (v21 & 1) != 0 )
    v5 = v23;
  else
    v5 = v22;
  if ( (v21 & 1) != 0 )
    v6 = *(_QWORD *)&v22[7];
  else
    v6 = (unsigned __int64)v21 >> 1;
  v19 = a1;
  v20 = v4;
  v13 = (__int64)v5;
  v14 = v6;
  sub_173B820(&v13, &v19);
  if ( (v17[0] & 1) != 0 )
    v7 = v18;
  else
    v7 = (char *)v17 + 1;
  v8 = open(v7, 0);
  if ( v8 == -1 )
    goto LABEL_25;
  if ( fstat(v8, (struct stat *)&v13) == -1 )
  {
    close(v8);
    goto LABEL_25;
  }
  v9 = len[0];
  mapped_metadata = mmap(0LL, len[0], 3, 2, v8, 0LL);
  close(v8);
  if ( mapped_metadata == (_BYTE *)-1LL )
  {
LABEL_25:
    mapped_metadata = 0LL;
    goto UNENCRYPTED;
  }
  if ( v9 >= 1 )
  {
    v11 = 0LL;
    do
    {
      mapped_metadata[v11] ^= METADATA_KEY[v11 & 0x7F];
      ++v11;
    }
    while ( v9 != (_DWORD)v11 );
  }
UNENCRYPTED:
  if ( (v17[0] & 1) != 0 )
    operator delete(v18);
  if ( (v21 & 1) != 0 )
    operator delete(v23);
  return mapped_metadata;
}
```

å¯¹æ¯” Unity çš„é»˜è®¤å®ç° ï¼ˆhttps://github.com/mos9527/il2cpp-27/blob/main/libil2cpp/vm/MetadataLoader.cpp)ï¼š

```c++
void* MetadataLoader::LoadMetadataFile(const char* fileName)
{
    std::string resourcesDirectory = utils::PathUtils::Combine(utils::Runtime::GetDataDir(), utils::StringView<char>("Metadata"));

    std::string resourceFilePath = utils::PathUtils::Combine(resourcesDirectory, utils::StringView<char>(fileName, strlen(fileName)));

    int error = 0;
    FileHandle* handle = File::Open(resourceFilePath, kFileModeOpen, kFileAccessRead, kFileShareRead, kFileOptionsNone, &error);
    if (error != 0)
        return NULL;

    void* fileBuffer = utils::MemoryMappedFile::Map(handle);

    File::Close(handle, &error);
    if (error != 0)
    {
        utils::MemoryMappedFile::Unmap(fileBuffer);
        fileBuffer = NULL;
        return NULL;
    }

    return fileBuffer;
}
```

å¯è§è¯¥ä¼ªä»£ç å—æ¶‰åŠåˆ°æ··æ·†æµç¨‹ï¼š

```c++
  if ( v9 >= 1 )
  {
    v11 = 0LL;
    do
    {
      mapped_metadata[v11] ^= METADATA_KEY[v11 & 0x7F];
      ++v11;
    }
    while ( v9 != (_DWORD)v11 );
  }
```

æœ€åï¼Œè§£å¯†è„šæœ¬å¦‚ä¸‹ï¼š

```python
key = bytearray([
  0xC3, 0x2B, 0x75, 0xB9, 0xAF, 0x84, 0x3C, 0x1F, 0x2E, 0xFB, 
  0xBF, 0x6C, 0x63, 0x19, 0x70, 0xE4, 0xF0, 0x92, 0xA3, 0x3E, 
  0xD1, 0x5C, 0x30, 0x0A, 0xCB, 0x9B, 0x04, 0xF8, 0x16, 0xC7, 
  0x91, 0x4A, 0x8D, 0xAE, 0xFA, 0xBA, 0x7E, 0x71, 0x65, 0x53, 
  0xAF, 0x98, 0x2E, 0xC2, 0xC0, 0xC6, 0xA3, 0x81, 0x74, 0xD4, 
  0xA3, 0x2C, 0x3F, 0xC2, 0x97, 0x66, 0xFB, 0x6B, 0xEE, 0x14, 
  0x80, 0x43, 0x09, 0x67, 0x69, 0x75, 0xDE, 0xB4, 0x1F, 0xB5, 
  0x65, 0x7E, 0x2D, 0x50, 0x8E, 0x38, 0x2E, 0x6D, 0x4A, 0x05, 
  0xF7, 0x82, 0x84, 0x41, 0x23, 0x64, 0x0A, 0xCB, 0x16, 0x93, 
  0xBE, 0x13, 0x83, 0x50, 0xD2, 0x6C, 0x8F, 0xC7, 0x58, 0x4A, 
  0xE7, 0xEE, 0x62, 0xBE, 0x6F, 0x25, 0xFE, 0xEF, 0x33, 0x5E, 
  0x38, 0x8D, 0x21, 0xE8, 0x1C, 0xFE, 0xBE, 0xC7, 0x43, 0x05, 
  0x6A, 0x13, 0x9D, 0x8B, 0xF6, 0x52, 0xFA, 0xDC
])
with open('global-metadata.dat','rb') as E:
    with open('global-metadata-decrypt.dat','wb') as D:
        data = bytearray(E.read())
        for i in range(0, len(data)):
            data[i] ^= key[i & 0x7f]
        D.write(data)
```

å¤„ç†åå†æ¬¡Dump, `metadata`å·²ç»èƒ½å¤Ÿé¡ºåˆ©åŠ è½½

![image-20231228183207342](/image-archive-20240105/image-20231228183207342.png)

**æ³¨ï¼š**ç”± `ERROR: This file may be protected.` ï¼Œåç»­è¿˜å°†å¯¹`il2cpp.so`ç»§ç»­å¤„ç†ï¼›è¯·çœ‹ä¸‹æ–‡

é™„[Il2CppDumper æ£€æŸ¥æµç¨‹](https://github.com/Perfare/Il2CppDumper/blob/master/Il2CppDumper/ExecutableFormats/Elf64.cs)ï¼š

```c#
  private bool CheckProtection()
        {
            try
            {
                //.init_proc
                if (dynamicSection.Any(x => x.d_tag == DT_INIT))
                {
                    Console.WriteLine("WARNING: find .init_proc");
                    return true;
                }
                //JNI_OnLoad
                ulong dynstrOffset = MapVATR(dynamicSection.First(x => x.d_tag == DT_STRTAB).d_un);
                foreach (var symbol in symbolTable)
                {
                    var name = ReadStringToNull(dynstrOffset + symbol.st_name);
                    switch (name)
                    {
                        case "JNI_OnLoad":
                            Console.WriteLine("WARNING: find JNI_OnLoad");
                            return true;
                    }
                }
                if (sectionTable != null && sectionTable.Any(x => x.sh_type == SHT_LOUSER))
                {
                    Console.WriteLine("WARNING: find SHT_LOUSER section");
                    return true;
                }
            }
            catch
            {
                // ignored
            }
            return false;
        }
```



### 2.æå– libil2cpp.so

#### å‡†å¤‡

æ‰‹ä¸Šæ²¡æœ‰Rootçš„å®‰å“å®ä½“æœºï¼Œè¿™é‡Œå°±ç”¨WSAäº†

https://github.com/MustardChef/WSABuildså¾ˆæ–¹ä¾¿åœ°æä¾›äº†é›†æˆMagiskçš„æ–¹æ¡ˆ

- Dump è¿è¡Œæ—¶ `libil2cpp.so`

  ![image-20231228201100934](/image-archive-20240105/image-20231228201100934.png)

  ä» /proc/[pid]/maps é‡Œè¯»åˆ°åŸºå€åå¯å€ŸåŠ© GameGuardian æå–
  
  **æ³¨æ„ï¼š** å°è¯•ä»ç¬¬äºŒé¡¹å¼€å§‹æå–ï¼›ç¬¬ä¸€é¡¹ä¸ºmemory mapçš„åŸso

![image-20231228201144812](/image-archive-20240105/image-20231228201144812.png)

![image-20231228201739702](/image-archive-20240105/image-20231228201739702.png)

- é‡å¤ä¹‹å‰æ­¥éª¤

  ![image-20231228201403332](/image-archive-20240105/image-20231228201403332.png)

å¯ä»¥å‘ç°è¿™æ¬¡æ²¡æœ‰`ERROR: This file may be protected.`

- ä¿®è¡¥åè½½å…¥ IDAï¼Œ[è¯¦è§è¯¥ Issue](https://github.com/Perfare/Il2CppDumper/issues/685)

![image-20231229112048891](/image-archive-20240105/image-20231229112048891.png)

### 3. Dumpçš„éƒ¨åˆ†å‘ç°

è¿™é‡Œçš„æ··æ·†å™¨æ˜¯[BeeByte](https://www.beebyte.co.uk/)ï¼›è™½ç„¶åªæ˜¯æ›´åæ··æ·†ï¼Œä½†è¦æ‹¿è¿™äº›ç¬¦å·åˆ†æä¸šåŠ¡é€»è¾‘çš„è¯è¿˜æ˜¯å¾ˆå¤´ç–¼

![image-20231229105840353](/image-archive-20240105/image-20231229105840353.png)

- è²Œä¼¼Classéƒ¨åˆ†åç§°ä»ç„¶å®Œå¥½

![image-20231229110029895](/image-archive-20240105/image-20231229110029895.png)

### 4. API è§£å¯†ï¼Œfirst look

æŠ“åŒ…å·¥å…·ï¼š[Reqable](https://reqable.com/zh-CN/),

CAéªŒè¯å¯ä»¥é€šè¿‡https://github.com/NVISOsecurity/MagiskTrustUserCertsè½»æ¾ç»•è¿‡ï¼Œè¿™é‡Œä¸å¤šè¯´äº†

![image-20231229113505997](/image-archive-20240105/image-20231229113505997.png)

- æ‰¾åˆ°ç–‘ä¼¼è§£å¯†ä¸šåŠ¡çš„é€»è¾‘å¦‚ä¸‹

![image-20231229140355912](/image-archive-20240105/image-20231229140355912.png)

![image-20231229140222478](/image-archive-20240105/image-20231229140222478.png)

![image-20231229140251468](/image-archive-20240105/image-20231229140251468.png)

Bingo! 

æƒ³åœ¨ä¸‹ä¸€æ¬¡ç”¨åŠ¨æ€è°ƒè¯• (i.e. Frida) æ‹¿Key/IVï¼Œè¿˜è¯·è§åæ–‡

***SEE YOU SPACE COWBOY...***

### References

https://katyscode.wordpress.com/2021/02/23/il2cpp-finding-obfuscated-global-metadata/

## Project SEKAI é€†å‘ï¼ˆ2ï¼‰ï¼š FridaåŠ¨æ€è°ƒè¯•åŠå–API AES KEY/IV

- åˆ†ævariantï¼šä¸–ç•Œè¨ˆåŠƒ 2.6.1 ï¼ˆGoogle Play å°æœï¼‰

### 0. ç‰ˆæœ¬æ›´æ–°

æ¯•ç«Ÿç¾æœçš„æ•°æ®åº“æ»åå¥½å‡ ä¸ªç‰ˆæœ¬å·...

æ¢åˆ°å°æœä¹‹åç‰ˆæœ¬å·(2.4.1->2.6.1)æœ‰å˜åŒ–ï¼ŒåŒæ—¶ä¸Šä¸€ç¯‡æ‰€è¯´çš„`metadata`åŠ å¯†æ‰‹æ®µä¹Ÿæ¢äº†

- åŒæ ·ï¼Œæ‹‰å–ä¸€ä»½ä¿®å¤è¿‡çš„dumpåˆ†æï¼Œå¯è§:

![image-20231230182936676](/image-archive-20240105/image-20231230182936676.png)

- `metadata`åŠ è½½éƒ¨åˆ†ä¸å†è¿›è¡Œå…¨å±€åŠ è§£å¯†ï¼Œè§‚å¯ŸäºŒè¿›åˆ¶ä¹Ÿå¯ä»¥å‘ç°ï¼š

![image-20231230183059925](/image-archive-20240105/image-20231230183059925.png)

2.4.0è§£å¯†å`metadata`

![image-20231230183133793](/image-archive-20240105/image-20231230183133793.png)

2.6.1æº`metadata`å¤šå‡ºæ¥8å­—èŠ‚ï¼Ÿ

![image-20231230183234026](/image-archive-20240105/image-20231230183234026.png)

![image-20231230183305449](/image-archive-20240105/image-20231230183305449.png)

- åŠ è½½éƒ¨åˆ†å‡ºå…¥ä¸å¤§ï¼Œå°è¯•åˆ æ‰8å­—èŠ‚ç›´æ¥åˆ†æ

![image-20231230183414173](/image-archive-20240105/image-20231230183414173.png)

- å¡åœ¨è¯»stringè¿™ä¸€å—ï¼›åˆ°`Il2CppGlobalMetadataHeader.stringOffset`æ£€æŸ¥ä¸€ä¸‹

![image-20231230183456731](/image-archive-20240105/image-20231230183456731.png)

- æœç„¶æœ‰æ··æ·†ï¼›è¿™éƒ¨åˆ†åº”è¯¥æ˜¯æ˜æ–‡ï¼Œè€Œunityçš„ä¾‹å­ä¸­å¼€å§‹åº”è¯¥æ˜¯`mscrolib`

![image-20231230183601458](/image-archive-20240105/image-20231230183601458.png)

- è€Œsoä¸­il2cppå¯¹metadataçš„ä½¿ç”¨å´æ²¡åŠ å¤šä½™æ­¥éª¤ï¼›æ¨æµ‹è¿™éƒ¨åˆ†åœ¨åŠ è½½æ—¶è¿›è¡Œäº†åŸåœ°è§£å¯†

### 1. metadata åŠ¨æ€æå–

- å’Œä¸Šä¸€ç¯‡è®°å½•çš„`il2cpp.so`æå–æ­¥éª¤å¦‚å‡ºä¸€è¾™ï¼Œè¿™é‡Œä¸å†å¤šè¯´

![image-20231230183727385](/image-archive-20240105/image-20231230183727385.png)

- æ¯”å¯¹apkçš„å’Œdumpå‡ºæ¥çš„äºŒè¿›åˆ¶ï¼š

![image-20231230184527296](/image-archive-20240105/image-20231230184527296.png)

æœç„¶stringéƒ¨åˆ†æ˜æœ—äº†ï¼›ç»§ç»­dump

![image-20231230183345026](/image-archive-20240105/image-20231230183345026.png)

- æˆåŠŸï¼å¸¦ä¿¡æ¯è¿›idaï¼›è€Œéå¸¸æˆå‰§åŒ–çš„äº‹æƒ…æ˜¯ï¼š

![image-20231230185256794](/image-archive-20240105/image-20231230185256794.png)

![image-20231230185620868](/image-archive-20240105/image-20231230185620868.png)

**æ··æ·†æ²¡äº†ã€‚**

*æœç„¶æ˜¯éå¸¸pro-customerçš„ç‰ˆæœ¬æ›´æ–°å•Šï¼ˆç¡®ä¿¡ï¼‰*

---

### 2. frida-gadget æ³¨å…¥

WSAä¸Šæ³¨å…¥å„ç§ç¢°å£ï¼Œä¸è¿‡å®ä½“æœºä¸Šå³ä½¿æ— Rootä¹Ÿå¯ä»¥é€šè¿‡`frida-gadget`ä¿®æ”¹apkæ³¨å…¥

ä¹‹å‰ç”¨è¿‡æ”¹dexçš„æ–¹å¼å°è¯•è¿‡ï¼Œå¹¶ä¸æˆåŠŸ;æŒ‘ä¸€ä¸ªè¿è¡Œæ—¶ä¼šåŠ è½½çš„.soä¸‹æ‰‹ï¼š

**æ³¨ï¼š** åé¢ç›®æ ‡libæ¢æˆäº†`libFastAES.so`ï¼Œæˆªå›¾å°šæœªæ›´æ–°

![ ](/image-archive-20240105/image-20231229185227359.png)

![image-20231229192615725](/image-archive-20240105/image-20231229192615725.png)

![image-20231229185311898](/image-archive-20240105/image-20231229185311898.png)

æ‹¿apktoolæ‰“åŒ…åç­¾åå³å¯å®‰è£…åˆ°çœŸæœº

![image-20231229192636829](/image-archive-20240105/image-20231229192636829.png)

**æ³¨ï¼š** æˆ‘çš„fridaè·‘åœ¨WSLä¸Šï¼Œæ‹¿ Windows æœºå™¨çš„adbåšåç«¯åœ¨ Win/Linux æœºå™¨é…ç½®åˆ†åˆ«å¦‚ä¸‹

```cmd
adb.exe -a -P 5555 nodaemon server
```

``` bash
export ADB_SERVER_SOCKET=tcp:192.168.0.2:5555
```

- ç”¨ https://github.com/vfsfitvnm/frida-il2cpp-bridge æµ‹è¯•ï¼Œæœªå‘ç°é—®é¢˜

![image-20231230233324422](/image-archive-20240105/image-20231230233324422.png)

### 3. IL2CPP åŠ¨æ€è°ƒç”¨ runtime

æ¥ä¸‹æ¥å°±å¯ä»¥ç›´æ¥è°ƒç”¨runtimeçš„ä¸œè¥¿äº†

- å›é¡¾ä¸Šæ–‡ï¼Œè²Œä¼¼APIä¸šåŠ¡é€»è¾‘åªåŠ äº†ä¸€å¥—å¯¹ç§°åŠ å¯†ï¼ˆAES128 CBCï¼‰ï¼›è¿™é‡ŒåŒæ ·å¦‚æ­¤

![image-20231231002031783](/image-archive-20240105/image-20231231002031783.png)

![image-20231231003122139](/image-archive-20240105/image-20231231003122139.png)

![image-20231231003153856](/image-archive-20240105/image-20231231003153856.png)

![image-20231231003214559](/image-archive-20240105/image-20231231003214559.png)

**æ€»ç»“**ï¼š

- `APIManager`ä¸ºå•ä¾‹å®ä¾‹
- `APIManager.get_Crypt()`å–å¾—`Crypt`ï¼Œå…¶`aesAlgo`å³ä¸º.NETæ ‡å‡†çš„`AesManaged`

ç»¼ä¸Šï¼Œç®€å•å†™ä¸€ä¸ªè„šæœ¬ï¼š

```typescript
import "frida-il2cpp-bridge";

Il2Cpp.perform(() => {
    Il2Cpp.domain.assemblies.forEach((i)=>{
        console.log(i.name);
    })
    const game = Il2Cpp.domain.assembly("Assembly-CSharp").image;
    const apiManager = game.class("Sekai.APIManager");
    Il2Cpp.gc.choose(apiManager).forEach((instance: Il2Cpp.Object) => {
        console.log("instance found")
        const crypt = instance.method<Il2Cpp.Object>("get_Crypt").invoke();
        const aes = crypt.field<Il2Cpp.Object>("aesAlgo");
        const key = aes.value.method("get_Key").invoke();
        const iv = aes.value.method("get_IV").invoke();
        console.log(key);
        console.log(iv);
    });
});
```

è¾“å‡ºå¦‚ä¸‹ï¼š

![image-20231231003558106](/image-archive-20240105/image-20231231003558106.png)

![image-20231231001737613](/image-archive-20240105/image-20231231001737613.png)

- æµ‹è¯•è§£å¯†

![image-20231231002825994](/image-archive-20240105/image-20231231002825994.png)

æµ‹è¯•è„šæœ¬å¦‚ä¸‹ï¼š

```python
from Crypto.Cipher import AES

def unpad(data):
    padding_len = data[-1]
    return data[:-padding_len]
def decrypt_aes_cbc(data, key, iv):
    cipher = AES.new(key, AES.MODE_CBC, iv)
    return unpad(cipher.decrypt(data))

payload = open('payload','rb').read()
key = b"g2fcC0ZczN9MTJ61"
iv = b"msx3IV0i9XE5uYZ1"

plaintext = decrypt_aes_cbc(payload, key, iv)
print(plaintext)
```

![image-20231231002849347](/image-archive-20240105/image-20231231002849347.png)

ä¸æ¸…æ¥šåºåˆ—åŒ–æ ¼å¼æ˜¯ä»€ä¹ˆï¼Œå¯èƒ½æ˜¯protobufï¼›è¿˜æ˜¯åœ¨ä¸‹ä¸€ç¯‡ç»§ç»­è°ƒæŸ¥å§

***SEE YOU SPACE COWBOY...***

### References

https://lief-project.github.io/doc/latest/tutorials/09_frida_lief.html

https://github.com/vfsfitvnm/frida-il2cpp-bridge

## Project SEKAI é€†å‘ï¼ˆ3ï¼‰ï¼š pjsk APIä¸­é—´äººæ”»å‡» POC

- åˆ†ævariantï¼šä¸–ç•Œè¨ˆåŠƒ 2.6.1 ï¼ˆGoogle Play å°æœï¼‰

è¿™é‡Œå’Œil2cppå…³ç³»è²Œä¼¼ä¸å¤§ï¼›ä¸»è¦è®°å½•ä¸€ä¸‹apiåŒ…åŠ«æŒå¯ä»¥ç”¨çš„æ‰‹æ®µ

### 1. å·¥å…·

hostä½¿ç”¨https://github.com/mitmproxy/mitmproxyï¼Œ

victimä¸Šå®‰è£…https://github.com/NVISOsecurity/MagiskTrustUserCertsåï¼Œå¯¼å…¥mitmproxyçš„CAï¼Œé‡å¯å°±èƒ½æŠŠå®ƒå˜æˆæ ¹è¯ä¹¦

æœ€åï¼Œmitmproxyæ‰€ç”¨è„šæœ¬ï¼šhttps://github.com/mos9527/sssekai/blob/main/sssekai/scripts/mitmproxy_sekai_api.py

### 2. åˆ†æ

ä¸Šä¸€ç¯‡çŒœæµ‹apiçš„å°åŒ…ç”¨äº†protobufï¼›å¹¶ä¸ç„¶ï¼Œè¿™é‡Œæ˜¯[MessagePack](https://msgpack.org/index.html)

å¦‚æ­¤ï¼Œæ•°æ®schemaå’ŒæŠ¥æ–‡åœ¨ä¸€èµ·ï¼›ä¸ç”¨é¢å¤–æŒ–äº†

ç”¨mitmproxyåšä¸ªpocå®æ—¶è§£å¯†è½¬`json`çœ‹çœ‹ï¼š

![image-20231231115914176](/image-archive-20240105/image-20231231115914176.png)

### 3. MITM

*æ²¡é”™ï¼Œæè¿™ä¸ªåªæ˜¯æƒ³çœ‹çœ‹MASTERè°±é¢é•¿ä»€ä¹ˆæ ·...*

---

é”MASTERçš„å­—æ®µè²Œä¼¼åœ¨è¿™é‡Œï¼›å°è¯•ç›´æ¥ä¿®æ”¹

```python
    def response(self, flow : http.HTTPFlow):
        if self.filter(flow):
            body = self.log_flow(flow.response.content, flow)
            if body:
                if 'userMusics' in body:
                    print('! Intercepted userMusics')
                    for music in body['userMusics']:
                        for stat in music['userMusicDifficultyStatuses']:
                            stat['musicDifficultyStatus'] = 'available'
                    flow.response.content = sekai_api_encrypt(packb(body))
```

é€‰é¡¹å¯ä»¥ç‚¹äº®ï¼›ä½†æ— æœï¼šè²Œä¼¼liveä¼šåœ¨æœåŠ¡ç«¯é‰´æƒ

![image-20231231121435020](/image-archive-20240105/image-20231231121435020.png)

![image-20231231121528777](/image-archive-20240105/image-20231231121528777.png)

ä¸è¿‡liveé‰´æƒidè²Œä¼¼ä¸ä¼šåœ¨å¼€å§‹liveä¸­ä½¿ç”¨ï¼›æŠ“åŒ…ä¸­æ²¡æœ‰å¯¹idçš„äºŒæ¬¡å¼•ç”¨

è€ƒè™‘å¯èƒ½è°±é¢éš¾åº¦é€‰æ‹©åªåœ¨å®¢æˆ·ç«¯è¿›è¡Œï¼Œé‚£ä¹ˆä¿®æ”¹ä¸ŠæŠ¥æœåŠ¡å™¨çš„éš¾åº¦ç³»æ•°ä¹Ÿè®¸èƒ½å¤Ÿç»•è¿‡

```python
    def request(self,flow: http.HTTPFlow):
        print(flow.request.host_header, flow.request.url)
        if self.filter(flow):
            body = self.log_flow(flow.request.content, flow)
            if body:
                if 'musicDifficultyId' in body:
                    print('! Intercepted Live request')
                    body['musicDifficultyId'] = 4 # Expert
                flow.request.content = sekai_api_encrypt(packb(body))
```

å†æ¬¡å¯åŠ¨ï¼š

![image-20231231123020461](/image-archive-20240105/image-20231231123020461.png)

å½“ç„¶ï¼Œåˆ†æ•°ä¸ŠæŠ¥åªä¼šæŒ‰expertéš¾åº¦è¿›è¡Œ

---

æ„å¤–è¾ƒå°‘ï¼Œåç»­åº”è¯¥ä¸ä¼šå†ç© MITM ç›¸å…³å†…å®¹äº†

æ¥ä¸‹æ¥...æå–æ¸¸æˆassetï¼Ÿåœ¨æ­¤ä¹‹å‰...

***SEE YOU SPACE COWBOY...***

### References

https://msgpack.org/index.html

https://github.com/mitmproxy/mitmproxy

## Project SEKAI é€†å‘ï¼ˆ4ï¼‰ï¼š pjsk AssetBundle åæ··æ·† + PV åŠ¨ç”»å¯¼å…¥

- åˆ†ævariantï¼šä¸–ç•Œè¨ˆåŠƒ 2.6.1 ï¼ˆGoogle Play å°æœï¼‰

### 1. æ•°æ®æå–

pjskèµ„æºé‡‡ç”¨çƒ­æ›´æ–°æ¨¡å¼ï¼›æœ¬ä½“è¿è¡Œæ—¶ä¹‹å¤–ï¼Œè¿˜ä¼šæœ‰~~3~4Gå·¦å³çš„èµ„æº~~ ï¼ˆ**æ³¨ï¼š**ä¸å®šé‡ï¼Œè§ä¸‹ä¸€ç¯‡ï¼‰

- å°è¯•ä»æœ¬æœºæå–èµ„æº

![image-20231231183530650](/image-archive-20240105/image-20231231183530650.png)

![image-20231231183558159](/image-archive-20240105/image-20231231183558159.png)

æ²¡æœ‰magic `UnityFS`,è€ƒè™‘abæ–‡ä»¶æœ‰æ··æ·†

### 2. åŠ è½½æµç¨‹åˆ†æ

- è¿›dnSpyç›´æ¥æœassetbundleæ‰¾ç›¸å…³Class

![image-20231231183823530](/image-archive-20240105/image-20231231183823530.png)

- è¿›idaçœ‹implï¼Œå¯ä»¥å¾ˆè½»æ¾çš„æ‰¾åˆ°åŠ è½½abçš„å«Œç–‘æµç¨‹

![image-20231231183917530](/image-archive-20240105/image-20231231183917530.png)

![image-20231231183933304](/image-archive-20240105/image-20231231183933304.png)

- æœ€åç›´æ¥è°ƒç”¨äº†unityçš„`LoadFromStream`ï¼Œ`Sekai.AssetBundleStream`å®ç°äº†è¿™æ ·çš„Streamï¼š

![image-20231231184111015](/image-archive-20240105/image-20231231184111015.png)

![image-20231231184246728](/image-archive-20240105/image-20231231184246728.png)

å¯ä»¥æ³¨æ„åˆ°

- åŠ è½½æ—¶æ ¹æ® `_isInverted` flag å†³å®šæ˜¯å¦è¿›è¡Œåæ··æ·†æ“ä½œ
- å¦‚æœæœ‰ï¼Œåˆ™å…ˆè·³è¿‡4bytes,ä¹‹å5bytesæŒ‰ä½å–å
- æœ€åç§»äº¤`InvertedBytesAB`ç»§ç»­å¤„ç†
  - æ³¨æ„åˆ°`n00`åº”ä¸º128ï¼Œ`v20`ä¸ºè¯»å–offset

- è¿™é‡Œè€ƒè™‘offset=0æƒ…å†µï¼Œé‚£ä¹ˆä»…å‰128å­—èŠ‚éœ€è¦å¤„ç†

è·Ÿè¿›`InvertedBytesAB`

![image-20231231184647711](/image-archive-20240105/image-20231231184647711.png)

å¯è§ï¼Œè¿™é‡Œå³**è·³è¿‡4bytesåï¼Œæ¯ 8bytesï¼Œå–åå‰5bytes**

ç»¼ä¸Šï¼Œè§£å¯†æµç¨‹åˆ†æå®Œæ¯•ï¼›é™„è„šæœ¬ï¼š

```python
import sys
import os
def decrypt(infile, outfile):
    with open(infile, 'rb') as fin:        
        magic = fin.read(4)    
        if magic == b'\x10\x00\x00\x00':
            with open(outfile,'wb') as fout:  
                for _ in range(0,128,8):
                    block = bytearray(fin.read(8))
                    for i in range(5):
                        block[i] = ~block[i] & 0xff
                    fout.write(block)
                while (block := fin.read(8)):
                    fout.write(block)    
        else:
            print('copy %s -> %s', infile, outfile)
            fin.seek(0)
            with open(outfile,'wb') as fout:  
                while (block := fin.read(8)):
                    fout.write(block)    

if len(sys.argv) == 1:
    print('usage: %s <in dir> <out dir>' % sys.argv[0])
else:
    for root, dirs, files in os.walk(sys.argv[1]):
        for fname in files:
            file = os.path.join(root,fname)
            if (os.path.isfile(file)):
                decrypt(file, os.path.join(sys.argv[2], fname))
```

### 3. æå–èµ„æº

![image-20231231192311049](/image-archive-20240105/image-20231231192311049.png)

- æ–‡ä»¶å¤„ç†å®Œåï¼Œå°±å¯ä»¥é https://github.com/Perfare/AssetStudioæŸ¥çœ‹èµ„æºäº†ï¼š

![image-20231231192416677](/image-archive-20240105/image-20231231192416677.png)

- ä¸è¿‡ç‰ˆæœ¬å·å¾ˆå¥½æ‰¾ï¼Œè¿™é‡Œæ˜¯`2020.3.21f1`ï¼š

![image-20231231192541641](/image-archive-20240105/image-20231231192541641.png)

- åŠ è½½å¯è¡Œï¼Œå¦‚å›¾ï¼š

![image-20231231192616533](/image-archive-20240105/image-20231231192616533.png)

### 4. AssetBundleInfo?

åœ¨æ•°æ®ç›®å½•é‡Œå‘ç°äº†è¿™ä¸ªæ–‡ä»¶ï¼ŒåŒæ—¶åœ¨`Sekai_AssetBundleManager__LoadClientAssetBundleInfo`ä¸­ï¼š

![image-20231231194342801](/image-archive-20240105/image-20231231194342801.png)

ç”¨çš„æ˜¯å’ŒAPIä¸€æ ·çš„å¯†é’¥å’Œå°åŒ…æ‰‹æ®µï¼Œè§£å¼€çœ‹çœ‹

**æ³¨ï¼š** å·¥å…·ç§»æ­¥ https://github.com/mos9527/sssekaiï¼›å†…éƒ¨è§£å¯†æµç¨‹åœ¨æ–‡ç« ä¸­éƒ½æœ‰æè¿°

```bash
python -m sssekai apidecrypt .\AssetBundleInfo .\AssetBundleInfo.json
```

![image-20231231202455181](/image-archive-20240105/image-20231231202455181.png)

### 5. èµ„æºä½¿ç”¨ï¼Ÿ

- è§’è‰²æ¨¡å‹æ•°å¾ˆå°‘

![image-20231231203837242](/image-archive-20240105/image-20231231203837242.png)

- çŒœæµ‹è¿™é‡Œçš„èµ„æºè¢«çƒ­åŠ è½½ï¼›åœ¨blenderç›´æ¥çœ‹çœ‹å·²ç»æœ‰çš„meshå§ï¼š

  bind poseæœ‰é—®é¢˜ï¼Œä¿®æ­£FBXå¯¼å‡ºè®¾ç½®å¯ä»¥è§£å†³ï¼›ä¸è¿‡æš‚ä¸”ä¸å¾€è¿™ä¸ªæ–¹å‘æ·±ç©¶

![image-20231231204536443](/image-archive-20240105/image-20231231204536443.png)

- åŒæ—¶ä¹Ÿè®¸å¯ä»¥è¯•è¯•å¯¼å…¥ Unityï¼Ÿ

https://github.com/AssetRipper/AssetRipper/ å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œå°è¯•å¦‚ä¸‹ï¼š

![image-20231231212152781](/image-archive-20240105/image-20231231212152781.png)

![image-20231231212236240](/image-archive-20240105/image-20231231212236240.png)

![image-20231231212822730](/image-archive-20240105/image-20231231212822730.png)

- æ‹–è¿› Editor

![image-20240101141156185](/image-archive-20240105/image-20240101141156185.png)

- æ³¨æ„shaderå¹¶æ²¡æœ‰è¢«æ‹‰å‡ºæ¥ï¼Œæš‚æ—¶ç”¨standardæ›¿è¡¥

![image-20240101152353581](/image-archive-20240105/image-20240101152353581.png)

- face/body meshåˆ†å¼€ï¼›éœ€ç»‘å®šface root bone(Neck)åˆ°body (Neck)

```c#
using UnityEngine;

public class BoneAttach : MonoBehaviour
{
    public GameObject src;

    public GameObject target;
    
    void Start()
    {
        Update();
    }
    void Update()
    {
        target.transform.position = src.transform.position;
        target.transform.rotation = src.transform.rotation;
        target.transform.localScale = src.transform.localScale;
    }
}
```

![image-20240101141256456](/image-archive-20240105/image-20240101141256456.png)

- æ³¨æ„åˆ°blendshape/morphåå­—å¯¹ä¸ä¸Š

![image-20240101141815895](/image-archive-20240105/image-20240101141815895.png)

![image-20240101141909497](/image-archive-20240105/image-20240101141909497.png)

çˆ¬äº†ä¸‹issueï¼šè¿™é‡Œçš„æ•°å­—æ˜¯åç§°çš„crc32ï¼ˆè§ https://github.com/AssetRipper/AssetRipper/issues/954ï¼‰

![image-20240101142406334](/image-archive-20240105/image-20240101142406334.png)

![image-20240101142422934](/image-archive-20240105/image-20240101142422934.png)

- æ‹¿blendshapeåå­—åšä¸ªmapä¿®å¤åï¼ŒåŠ¨ç”»keyæ­£å¸¸

![image-20240101150057515](/image-archive-20240105/image-20240101150057515.png)

- åŠ ä¸Štimelineåçš„æ’­æ”¾æ•ˆæœ

![Animation](/image-archive-20240105/Animation.gif)

ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™å†™ä¹‹åçš„ï¼Œæš‚æ—¶ç”»å‡ ä¸ªé¥¼ï¼š

- èµ„æºå¯¼å…¥Blender + toon shader å¤åˆ»
- èµ„æºå¯¼å…¥ [Foundation](https://github.com/mos9527/Foundation/tree/master/Source) 
- è„±ç¦»æ¸¸æˆè§£æ+ä¸‹è½½èµ„æº

***SEE YOU SPACE COWBOY...***

### References

https://github.com/AssetRipper/AssetRipper/

https://github.com/AssetRipper/AssetRipper/issues/954

https://github.com/mos9527/Foundation

## Project SEKAI é€†å‘ï¼ˆ5ï¼‰ï¼š AssetBundle è„±æœº + USM æå–

- åˆ†ævariantï¼šä¸–ç•Œè¨ˆåŠƒ 2.6.1 ï¼ˆGoogle Play å°æœï¼‰

### 1. AssetBundleInfo

å‰æ–‡æåŠçš„`AssetBundleInfo`æ˜¯ä»è®¾å¤‡æå–å‡ºæ¥çš„ï¼›å‡è®¾æ˜¯å·²ç»åŠ è½½è¿‡çš„æ‰€æœ‰èµ„æºçš„ç¼“å­˜çš„è¯ï¼š

- åœ¨åˆšåˆšå®Œæˆä¸‹è½½çš„è®¾å¤‡ä¸Šæå–è¯¥æ–‡ä»¶æ—¶ï¼Œè¯¥æ–‡ä»¶ 4MB

![image-20240101204313069](/image-archive-20240105/image-20240101204313069.png)

- ä½†æ˜¯åœ¨åˆå§‹åŒ–åé‡ç°æŠ“åŒ…æ—¶å‘ç°çš„è¯¥æ–‡ä»¶ä¸º **13MB**

```bash
curl -X GET 'https://184.26.43.87/obj/sf-game-alisg/gdl_app_5245/AssetBundle/2.6.0/Release/online/android21/AssetBundleInfo.json' -H 'Host: lf16-mkovscdn-sg.bytedgame.com' -H 'User-Agent: UnityPlayer/2020.3.32f1 (UnityWebRequest/1.0, libcurl/7.80.0-DEV)' -H 'Accept-Encoding: deflate, gzip' -H 'X-Unity-Version: 2020.3.32f1'
```

![image-20240101204525117](/image-archive-20240105/image-20240101204525117.png)

- æ¨æµ‹è®¾å¤‡ä¸Šæ–‡ä»¶ä¸ºå·²ç¼“å­˜èµ„æºåº“ï¼Œè€Œè¿™é‡Œçš„å³ä¸ºå…¨é‡èµ„æºé›†åˆï¼›å°è¯•dump

```bash
 sssekai apidecrypt .\assetbundleinfo .\assetbundleinfo.json
```

- æŸ¥èº«ä½“æ¨¡å‹æ•°çœ‹çœ‹å§

![image-20240101204751167](/image-archive-20240105/image-20240101204751167.png)

- æ­¤å¤–ï¼Œè¿™é‡Œçš„æ•°æ®è¿˜ä¼šå¤šå‡ ä¸ªfield

æ–°æ•°æ®åº“ï¼š

```json
        "live_pv/model/character/body/21/0001/ladies_s": {
            "bundleName": "live_pv/model/character/body/21/0001/ladies_s",
            "cacheFileName": "db0ad5ee5cc11c50613e7a9a1abc4c55",
            "cacheDirectoryName": "33a2",
            "hash": "28b258e96108e44578028d36ec1a1565",
            "category": "Live_pv",
            "crc": 2544770552,
            "fileSize": 588586,
            "dependencies": [
                "android1/shader/live"
            ],
            "paths": null,
            "isBuiltin": false,
            "md5Hash": "f9ac19a16b2493fb3f6f0438ada7e269",
            "downloadPath": "android1/live_pv/model/character/body/21/0001/ladies_s"
        },
```

è®¾å¤‡æ•°æ®åº“ï¼š

```json
        "live_pv/model/character/body/21/0001/ladies_s": {
            "bundleName": "live_pv/model/character/body/21/0001/ladies_s",
            "cacheFileName": "db0ad5ee5cc11c50613e7a9a1abc4c55",
            "cacheDirectoryName": "33a2",
            "hash": "28b258e96108e44578028d36ec1a1565",
            "category": "Live_pv",
            "crc": 2544770552,
            "fileSize": 588586,
            "dependencies": [
                "android1/shader/live"
            ],
            "paths": null,
            "isBuiltin": false,
            "md5Hash": "",
            "downloadPath": ""
        },
```

å¤šå‡ºçš„`downloadPath`å¯ä»¥åˆ©ç”¨ï¼Œç»§ç»­å§...

### 2. CDNï¼Ÿ

- å¯åŠ¨ä¸‹è½½åï¼Œèƒ½æŠ“åˆ°ä¸€å †è¿™ç§åŒ…ï¼š

```bash
curl -X GET 'https://184.26.43.74/obj/sf-game-alisg/gdl_app_5245/AssetBundle/2.6.0/Release/online/android1/actionset/group1?t=20240101203510' -H 'Host: lf16-mkovscdn-sg.bytedgame.com' -H 'User-Agent: UnityPlayer/2020.3.32f1 (UnityWebRequest/1.0, libcurl/7.80.0-DEV)' -H 'Accept-Encoding: deflate, gzip' -H 'X-Unity-Version: 2020.3.32f1'
```

`downloadPath`å­—æ®µåœ¨è¿™é‡Œå‡ºç°äº†ï¼›çœ‹èµ·æ¥`https://184.26.43.74/obj/sf-game-alisg/gdl_app_5245/AssetBundle/2.6.0/Release/online` ` æ˜¯è¿™é‡Œçš„ABçš„æ ¹è·¯å¾„

è€Œ`184.26.43.74`å°±æ˜¯cdnäº†ï¼Œæ¯•ç«Ÿ

![image-20240101205501465](/image-archive-20240105/image-20240101205501465.png)

- cdnçš„åœ°å€çœ‹èµ·æ¥æ˜¯å†…åµŒçš„ï¼›åœ¨dumpå‡ºæ¥çš„stringsä¸­ï¼š

![image-20240101210240573](/image-archive-20240105/image-20240101210240573.png)

### 3. çƒ­æ›´æ–° Cache

è€ƒè™‘pjskæ›´æ–°é¢‘ç‡å¤§ï¼Œæ¯æ¬¡é‡æ–°ä¸‹æ‰€æœ‰æ•°æ®ä¸æ˜¯å¾ˆé«˜æ•ˆ

åšä¸€ä¸ªæœ¬åœ°cacheåŠ¨æœºå……åˆ†ï¼›ç»†èŠ‚å°±ä¸åœ¨è¿™é‡Œè¯´äº†ï¼Œè¯·çœ‹ https://github.com/mos9527/sssekai/blob/main/sssekai/abcache/__init__.py

å°è¯•æ‹‰å–å…¨éƒ¨èµ„æºï¼Œè²Œä¼¼éœ€è¦*27GB*

![image-20240102003435800](/image-archive-20240105/image-20240102003435800.png)

### 4. æ–‡ä»¶ä¸€è§ˆ

- åœ¨ WinDirStat ä¸­æŸ¥çœ‹åˆ†å¸ƒ

![image-20240102095200320](/image-archive-20240105/image-20240102095200320.png)

- åŠ¨ç”»èµ„æºï¼š

![image-20240102095331527](/image-archive-20240105/image-20240102095331527.png)

- VO

![image-20240102095619789](/image-archive-20240105/image-20240102095619789.png)

![image-20240102095636123](/image-archive-20240105/image-20240102095636123.png)

å…¶å®ƒçš„è¯ï¼Œè²Œä¼¼æ˜¯éŸ³è§†é¢‘æ–‡ä»¶å±…å¤š

æ­å¼€åå¯ä»¥å‘ç°å°åŒ…æ ¼å¼æ˜¯[CriWare](https://www.criware.com/en/)ä¸­é—´ä»¶æ ¼å¼ï¼ˆi.e. USMè§†é¢‘æµï¼ŒHCAéŸ³é¢‘æµï¼‰

### 5. USM æå–

*åŠ¨æœºï¼šåº”è¯¥å¾ˆç®€å•orz*

---

![image-20240102112727738](/image-archive-20240105/image-20240102112727738.png)

- æ²¡æœ‰ Magic `CRID`

  å›åˆ°IDAï¼Œçœ‹èµ·æ¥USMèµ„æºå¹¶ä¸æ˜¯ç›´æ¥ä»assetbundleä¸­æå–ï¼›ä¸­é—´æœ‰ç¼“å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿçš„æµç¨‹

![image-20240102114924491](/image-archive-20240105/image-20240102114924491.png)

![image-20240102113153597](/image-archive-20240105/image-20240102113153597.png)

- æœç„¶ï¼Œåœ¨`/sdcard/Android/data/[...]/cache/movies`ä¸‹æœ‰è¿™æ ·çš„æ–‡ä»¶

![image-20240102115142365](/image-archive-20240105/image-20240102115142365.png)

![image-20240102115207418](/image-archive-20240105/image-20240102115207418.png)

- è€Œä¸”ç”¨[WannaCri](https://github.com/donmai-me/WannaCRI)å¯ä»¥ç›´æ¥demuxï¼Œæ²¡æœ‰é¢å¤–å¯†é’¥

![image-20240102115303855](/image-archive-20240105/image-20240102115303855.png)

- å›é¡¾assetä¸­USMæ–‡ä»¶

![image-20240102115518322](/image-archive-20240105/image-20240102115518322.png)

- åˆ©ç”¨`MovieBundleBuildData`çŒœæµ‹å¯ä»¥æ‹¼æ¥å‡ºæºæ–‡ä»¶

![image-20240102125531642](/image-archive-20240105/image-20240102125531642.png)

**è„šæœ¬ï¼š**https://github.com/mos9527/sssekai/blob/main/sssekai/entrypoint/usmdemux.py

![image-20240102135738112](/image-archive-20240105/image-20240102135738112.png)

***SEE YOU SPACE COWBOY...***

### References

https://github.com/mos9527/sssekai

https://github.com/donmai-me/WannaCRI

## Project SEKAI é€†å‘ï¼ˆ6ï¼‰ï¼šLive2D èµ„æº

- åˆ†ævariantï¼šä¸–ç•Œè¨ˆåŠƒ 2.6.1 ï¼ˆGoogle Play å°æœï¼‰

### 1. Live2D æ¨¡å‹

![image-20240102205059463](/image-archive-20240105/image-20240102205059463.png)

- æ‰€æœ‰live2dèµ„æºéƒ½å¯ä»¥åœ¨ `[abcache]/live2d/`ä¸‹æ‰¾åˆ°ï¼›åŒ…æ‹¬æ¨¡å‹åŠåŠ¨ç”»

é¦–å…ˆï¼Œ`.moc3`,`.model3`,`.physics3`èµ„æºéƒ½å¯ä»¥ç›´æ¥åˆ©ç”¨[Live2D Cubism Editor](https://www.live2d.com/en/cubism/download/editor/)ç›´æ¥æ‰“å¼€

è€Œæ¨¡å‹æè´¨éœ€è¦é¢å¤–æ›´åï¼›è¿™äº›ä¿¡æ¯éƒ½åœ¨`BuildModelData`ä¸­

![image-20240102205701929](/image-archive-20240105/image-20240102205701929.png)

- è¡¥å…¨åå³å¯å¯¼å…¥ï¼Œæ•ˆæœå¦‚å›¾

![image-20240102205542299](/image-archive-20240105/image-20240102205542299.png)

### 2. åŠ¨ç”» Key é¢„å¤„ç†

- å¯æƒœåŠ¨ç”»å¹¶ä¸æ˜¯`.motion3`æ ¼å¼

  å°åŒ…ä¸­æœ‰çš„æ˜¯Unityè‡ªå·±çš„Animation Clip

  åœ¨æå–èµ„æºæ—¶ï¼Œæ‰€æœ‰çš„åŠ¨ç”»keyåªèƒ½è¯»åˆ°å¯¹åº”key stringçš„CRC32 hashï¼›å¯¼å‡º/æ“ä½œå¿…é¡»çŸ¥é“string-hashå…³ç³»

![image-20240102210045486](/image-archive-20240105/image-20240102210045486.png)

- è¿™äº›stringåœ¨`moc3`ä»¥å¤–çš„æ–‡ä»¶ä¸­æœªçŸ¥ï¼šå½“ç„¶ï¼Œç¢°æ’å‡ºstringä¹Ÿä¸ç°å®ï¼›çŒœæƒ³stringå’ŒLive2Då‚æ•°æœ‰å…³

![image-20240102210113370](/image-archive-20240105/image-20240102210113370.png)

å°è¯•æœç´¢æ— æœ

![image-20240102210134670](/image-archive-20240105/image-20240102210134670.png)

- å¹¸è¿çš„æ˜¯Live2D Unity SDKå¯ä»¥å…è´¹å–å¾—ï¼Œè€Œä¸”é™„å¸¦æ ·ä¾‹

  è¿˜è®°å¾—å‰æ–‡å¤„ç†BlendShapeæ—¶ï¼Œå¯ä»¥çŸ¥é“`AnimationClip`çš„æº`.anim`ä¼šæœ‰pathçš„æºstringï¼Œè€Œä¸æ˜¯crc

![image-20240102210341040](/image-archive-20240105/image-20240102210341040.png)

å°è¯•åŠ å…¥å‰ç¼€

![image-20240102210356955](/image-archive-20240105/image-20240102210356955.png)

![image-20240102210406498](/image-archive-20240105/image-20240102210406498.png)

å¯ä»¥å®šä½ï¼›ä¸‹é¢ä»‹ç»å¦‚ä½•æ„å»ºCRCè¡¨ï¼Œå®Œæˆcrc-string map

### 3. moc3 ååºåˆ—åŒ– + CRCæ‰“è¡¨

- æ¯æ¬¡è¯»å–éƒ½ä»`moc3`æ–‡ä»¶æ„é€ åº”è¯¥å¯è¡Œï¼›ä¸è¿‡è€ƒè™‘åˆ°æœ‰å¯¼å…¥çº¯åŠ¨ç”»çš„éœ€æ±‚ï¼Œæ˜¾ç„¶ä¸€ä¸ªå¸¸é‡mapæ˜¯éœ€è¦çš„

- æ•…éœ€è¦èƒ½è¯»å–`moc3`ä¸­æ‰€æœ‰å‚æ•°åï¼›å‚ç…§https://raw.githubusercontent.com/OpenL2D/moc3ingbird/master/src/moc3.hexpat

  åœ¨ ImHex ä¸­å¯è§ï¼š

![image-20240103090132409](/image-archive-20240105/image-20240103090132409.png)

- æå–å‚æ•°åè„šæœ¬å¦‚ä¸‹ï¼š

```python
from typing import BinaryIO
from struct import unpack

## https://github.com/OpenL2D/moc3ingbird/blob/master/src/moc3.hexpat
class moc3:    
    Parameters : list
    Parts: list
    def __init__(self, file : BinaryIO) -> None:        
        # Header: 64 bytes
        file.seek(0)
        assert file.read(4) == b'MOC3'
        version = unpack('<c',file.read(1))[0]
        isBigEndian = unpack('<b',file.read(1))[0]
        assert not isBigEndian
                
        # TODO: Other fields
        file.seek(0x40)
        pCountInfo = unpack('<I',file.read(4))[0]
        
        file.seek(pCountInfo)
        numParts = unpack('<I',file.read(4))[0]
        file.seek(0x10, 1)
        numParameters = unpack('<I',file.read(4))[0]

        file.seek(0x4C)
        pParts = unpack('<I',file.read(4))[0]

        file.seek(0x108)
        pParameters = unpack('<I',file.read(4))[0]
        
        def read_strings(offset, count):
            for i in range(0,count):
                file.seek(offset + i * 0x40)   
                buffer = bytearray()  
                while b := file.read(1)[0]:
                    buffer.append(b)
                yield buffer.decode(encoding='utf-8')
        
        self.Parts = list(read_strings(pParts,numParts))
        self.Parameters = list(read_strings(pParameters,numParameters))

```

- ä¹‹åï¼Œæ„é€ CRCè¡¨å°±å¾ˆç®€å•äº†

```python
from io import BytesIO
from sssekai.unity.AssetBundle import load_assetbundle
from sssekai.fmt.moc3 import moc3
import sys, os
from UnityPy.enums import ClassIDType

ParameterNames = set()
PartNames = set()
tree = os.walk(sys.argv[1])
for root, dirs, files in tree:
    for fname in files:
        file = os.path.join(root,fname)
        with open(file,'rb') as f:
            env = load_assetbundle(f)
            for obj in env.objects:
                if obj.type == ClassIDType.TextAsset:
                    data = obj.read()
                    out_name : str = data.name
                    if out_name.endswith('.moc3'):
                        moc = moc3(BytesIO(data.script.tobytes()))                        
                        for name in moc.Parameters:
                            ParameterNames.add(name)
                        for name in moc.Parts:
                            PartNames.add(name)                        
from zlib import crc32
print('NAMES_CRC_TBL = {')
for name in sorted(list(PartNames)):
    fullpath = 'Parts/' + name
    print('    %d:"%s",' % (crc32(fullpath.encode('utf-8')), fullpath))
for name in sorted(list(ParameterNames)):
    fullpath = 'Parameters/' + name
    print('    %d:"%s",' % (crc32(fullpath.encode('utf-8')), fullpath))    
print('}')
```

- å¯¼å‡ºç»“æœå¦‚ä¸‹ï¼š

![image-20240102225301658](/image-archive-20240105/image-20240102225301658.png)

### 4. AnimationClip è½¬æ¢

Live2Dæœ‰è‡ªå·±ç§æœ‰çš„åŠ¨ç”»æ ¼å¼`motion3`ï¼Œå¹¸è¿çš„æ˜¯[UnityLive2DExtractor](https://github.com/Perfare/UnityLive2DExtractor)å·²åšäº†ç›¸å½“å¤šçš„è§£æå®ç°ï¼Œå¯ä¾›å‚è€ƒ

ç”±äºä¸Šæ–‡ä»‹ç»çš„ç»†èŠ‚å‡ºå…¥ï¼Œå¯¹PJSKçš„è½¬æ¢å¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨è¿™ä¸ªå·¥å…·

ç´¢æ€§åœ¨[sssekai](https://github.com/mos9527/sssekai)é‡ç°ï¼›ç»†èŠ‚**éå¸¸**ç¹çï¼Œå†æ¬¡ä¸å¤šè¯´ï¼›æœ‰å…´è¶£çš„è¯è¿˜è¯·å‚è€ƒæºç 

- ä½¿ç”¨ä¾‹ï¼šå°†è½¬åŒ–æ‰€æœ‰æ‰¾åˆ°çš„`AnimationClip`ä¸º`.motion3.json`

```bash
sssekai live2dextract c:\Users\mos9527\.sssekai\abcache\live2d\motion\21miku_motion_base .
```

- æ•ˆæœå¦‚å›¾

![sssekai-live2d-anim-import-demo](/image-archive-20240105/sssekai-live2d-anim-import-demo.gif)

***SEE YOU SPACE COWBOY...***

### References

https://github.com/AssetRipper/AssetRipper

https://github.com/OpenL2D/moc3ingbird

https://github.com/Perfare/UnityLive2DExtractor

## Project SEKAI é€†å‘ï¼ˆ7ï¼‰ï¼š3D æ¨¡å‹

### 1. æ–‡ä»¶ç»“æ„

- ç›®å‰å‘ç°çš„ 3D æ¨¡å‹åŸºæœ¬éƒ½åœ¨ `[ab cache]/live_pv/model/` ä¸‹

![image-20240105080707360](/image-archive-20240105/image-20240105080707360.png)

![image-20240105080841622](/image-archive-20240105/image-20240105080841622.png)

åˆæ­¥è§‚å¯Ÿï¼š

- (1) Body å³ç›®æ ‡æ¨¡å‹ï¼›å½“ç„¶ï¼Œä½œä¸ºskinned meshï¼Œè€Œä¸”å¸¦æœ‰blend shapesï¼Œå¤„ç†ç»†èŠ‚ä¼šå¾ˆå¤šï¼›åé¢ç»§ç»­è®²
- (2) å¤„çš„ `MonoBehavior` å°±å…¶åå­—çŒœæµ‹æ˜¯ç¢°æ’ç›’
- (3) å¤„çš„å‡ ä¸ª `Texture2D` åˆ™ä½œä¸ºtexture map

### 2. æ¨¡å‹æ”¶é›†

åˆ©ç”¨`sssekai`å–å¾—æ•°æ®çš„æµç¨‹åœ¨ï¼ˆ5ï¼‰ä¸­å·²æœ‰æè¿°ï¼Œè¿™é‡Œä¸å†å¤šè¯´

é¦–å…ˆæ•´ç†ä¸‹æ ¹æ®meshå‘ç°çš„**æ•°æ®éœ€æ±‚**

- (1) **Static Mesh**

pjskå‘ç°çš„æ‰€æœ‰meshåœ¨ç›¸åº”assetbundleä¸­ä¼šæœ‰1ä¸ªæˆ–æ›´å¤š`GameObject`çš„refï¼›å¯¹äºè¿™äº›refï¼Œstatic meshä¼šå‡ºç°åœ¨`m_MeshRenderer`ä¹‹ä¸­

å…¶ä»–ç»†èŠ‚æš‚ä¸”ä¸è¯´ï¼›å› ä¸ºåš Skinned Mesh å¯¼å…¥æ—¶éƒ½æ˜¯æˆ‘ä»¬è¦å¤„ç†çš„ä¸œè¥¿

- (2) **Skinned Mesh**

ä¸åŒäºstatic mesh,è¿™äº›refä¼šå‡ºç°åœ¨`m_SkinnedMeshRenderer`ä¹‹ä¸­

åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¼šéœ€è¦**éª¨éª¼ç»“æ„çš„ä¿¡æ¯**ï¼›bone  weightä»¥å¤–ï¼Œä¹Ÿéœ€è¦bone pathï¼ˆåé¢ä¼šç”¨æ¥åå‘hashï¼‰å’Œtransform

- (3) **Blend Shapes**

  è¿™äº›å¯ä»¥å‡ºç°åœ¨static/skinned meshä¹‹ä¸­ï¼›å¦‚æœå­˜åœ¨ï¼Œæˆ‘ä»¬ä¹Ÿä¼šéœ€è¦blend shapeåå­—çš„hashï¼Œç†ç”±å’Œbone pathä¸€è‡´

  åŠ ä¹‹ï¼ŒUnityå­˜åœ¨aseetbundleä¸­åŠ¨ç”»pathä¹Ÿéƒ½æ˜¯crcï¼Œblendshapeä¸æ˜¯ä¾‹å¤–

**æ€»ç»“:**

- (1) æ‰€ä»¥å¯¹äºstatic mesh,æœé›†å¯¹åº”`GameObject`å³å¯

- (2) å¯¹äºskinned meshï¼ŒåŒæ—¶ä¹Ÿéœ€è¦æ„é€ bone hierarchyï¼ˆå°±æ˜¯ä¸ªå•æ ¹æœ‰å‘æ— ç¯å›¾å•¦ï¼‰ï¼Œå¹¶ä¸”æ•´ç†vertexæƒé‡ï¼›

  åˆ™éœ€è¦æ”¶é›†çš„ï¼Œåè€Œåªæ˜¯boneçš„transformè€Œå·²ï¼›transformæœ‰å­/çˆ¶èŠ‚ç‚¹ä¿¡æ¯ï¼Œä¹Ÿæœ‰æ‹¥æœ‰transformçš„`GameObject`çš„ref

- (3) çš„æ•°æ®ï¼Œåœ¨(1)(2)ä¸­éƒ½ä¼šæœ‰

### 3. æ¨¡å‹å¯¼å…¥

å½“ç„¶ï¼Œè¿™é‡Œå°±ä¸è€ƒè™‘å°†æ¨¡å‹è½¬åŒ–ä¸ºä¸­é—´æ ¼å¼äº†ï¼ˆi.e. FBX,GLTFï¼‰

åˆ©ç”¨Blender Pythonï¼Œå¯ä»¥ç›´æ¥ç»™è¿™äº›ç´ æå†™ä¸ªimporter

å®ç°ç»†èŠ‚ä¸Šï¼Œæœ‰å‡ ä¸ªå€¼å¾—æ³¨æ„çš„åœ°æ–¹ï¼š

- Unityè¯»åˆ°çš„meshæ˜¯triangle list

- Blenderä½¿ç”¨å³æ‰‹ç³»ï¼ŒUnity/Direct3Dä½¿ç”¨å·¦æ‰‹ç³»

| åæ ‡ç³»  | å‰   | ä¸Š   | å·¦   |
| ------- | ---- | ---- | ---- |
| Unity   | Z    | Y    | X    |
| Blender | -Y   | Z    | -X   |

  - æ„å‘³ç€å¯¹å‘é‡éœ€è¦å¦‚ä¸‹è½¬åŒ–

    $\vec{V_{blender}}(X,Y,Z) = \vec(-V_{unity}.X,-V_{unity}.Z,V_{unity}.Y)$

  - å¯¹å››å…ƒæ•°XYZéƒ¨åˆ†

    $\vec{Q_{blender}}(W,X,Y,Z) = \overline{\vec(V_{unity}.W,-V_{unity}.X,-V_{unity}.Z,V_{unity}.Y)}$

- Unityå­˜å‚¨vectorç±»å‹æ•°æ®å¯èƒ½ä»¥2,3,4æˆ–å…¶ä»–ä¸ªæ•°æµ®ç‚¹æ•°è¯»å–ï¼Œè€Œvectorä¸ä¼šé¢å¤–å°åŒ…ï¼Œéœ€è¦ä»flat float arrayä¸­è¯»å–

  æ„å‘³ç€éœ€è¦è¿™æ ·çš„å¤„ç†

  ```python
         vtxFloats = int(len(data.m_Vertices) / data.m_VertexCount)
         vert = bm.verts.new(swizzle_vector3(
              data.m_Vertices[vtx * vtxFloats], # x,y,z
              data.m_Vertices[vtx * vtxFloats + 1],
              data.m_Vertices[vtx * vtxFloats + 2]            
          ))
  ```

  å—¯ã€‚è¿™é‡Œçš„`vtxFloats`å°±æœ‰å¯èƒ½æ˜¯$4$. è™½ç„¶$w$é¡¹å¹¶ç”¨ä¸åˆ°

- å¯¹äºBlendShape, blenderå¹¶ä¸æ”¯æŒç”¨ä»–ä»¬ä¿®æ”¹æ³•çº¿æˆ–uv;è¿™äº›ä¿¡æ¯åªèƒ½ä¸¢æ‰

- **Blenderçš„BlendShapeåå­—ä¸èƒ½è¶…è¿‡64å­—ï¼Œå¦åˆ™åç§°ä¼šè¢«æˆªå–**

- å¯¹äºbone,ä»–ä»¬ä¼šä»¥`Transform`çš„æ–¹å¼å‘ˆç°ï¼›ä½†åœ¨æ¨¡å‹ï¼ˆå’ŒåŠ¨ç”»æ–‡ä»¶ï¼‰ä¸­ï¼Œä»–ä»¬åªä¼šä»¥`Scene`ä¸­è¿™äº›**transformçš„å®Œæ•´è·¯å¾„çš„hashå­˜å‚¨**

- ç„¶åï¼Œ**Blenderçš„Vertex Group(bone weight group)åŒæ ·ä¹Ÿä¸èƒ½æœ‰64+é•¿åå­—**

- å¯¹äºvertex colorï¼Œblenderçš„`vertex_colors`layeråœ¨4.0å·²è¢«å¼ƒç”¨ï¼›ä¸è¿‡å¯ä»¥æ”¾åœ¨**Color Attributes**

**æ³¨ï¼š**Blenderä¸­å¯¹å†™è„šæœ¬å¸®åŠ©å¾ˆå¤§çš„ä¸€ä¸ªå°åŠŸèƒ½

![image-20240104202236513](/image-archive-20240105/image-20240104202236513.png)

![image-20240105085540376](/image-archive-20240105/image-20240105085540376.png)

### 4. Shaders!

`Texture2D`å’Œå…¶ä»–metaä¿¡æ¯å¯¼å…¥åï¼Œæ¥ä¸‹æ¥å°±æ˜¯åšshaderäº†

- æ‰‹å¤´æœ‰çš„çº¹ç†èµ„æºå¦‚ä¸‹ï¼š

1. `tex_[...]_C`

   Base **C**olor Mapï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„

![image-20240105081336340](/image-archive-20240105/image-20240105081336340.png)

2. `tex_[...]_S`

   **S**hadowed Color Mapï¼ˆä¹±çŒœ

   - NPRæ¸²æŸ“ä¸­å¸¸ç”¨çš„é˜ˆå€¼Mapï¼›ä¸ºèŠ‚çœæ€§èƒ½ï¼ˆå’Œç»†èŠ‚è´¨é‡ï¼‰ï¼Œå¼•æ“ä¹Ÿè®¸å¹¶ä¸ä¼šç»˜åˆ¶çœŸæ­£çš„**Shadow Map**

   - åœ¨å¾ˆå¤š NPR Shaderä¸­ï¼Œä½ ä¼šè§åˆ°è¿™æ ·çš„é€»è¾‘ï¼š

   ```glsl
   if (dot(N, L) > threshold) {
   	diffuse = Sample(ColorMap, uv);
   } else {
   	diffuse = Sample(ShadowColorMap, uv);
   }
   ```

å³ï¼šå¯¹NdotLä½œé˜ˆå€¼å¤„ç†ï¼Œå…‰çº¿äº®ï¼ˆNdotLæ›´å¤§ï¼‰é‡‡ç”¨åŸmapï¼Œå…‰çº¿æš—/æ— æ³•ç…§æ˜ï¼ˆNdotLæ›´å°æˆ–ä¸ºè´Ÿï¼‰é‡‡ç”¨é˜´å½±map

![image-20240105081322556](/image-archive-20240105/image-20240105081322556.png)

3. `tex_[...]_H`

   **H**ightlight Map

   - ~~æ³¨æ„åˆ°`Format`å‡ºäºæŸç§åŸå› ç«Ÿç„¶æ˜¯æœªå‹ç¼©çš„`RGB565`;åŒæ—¶,$R$é€šé“æ’ä¸º$0$,$B$é€šé“æ’ä¸º$132$ï¼Œåªæœ‰Gé€šé“æœ‰å¸¦æ„ä¹‰çš„ä¿¡æ¯~~
   - **UPD (20240907):** æ®æŒ‡æ­£ï¼Œ$R$é€šé“å®šä¹‰è‚¤è‰²,$B$å®šä¹‰NPRé˜´å½±é˜ˆå€¼ï¼Œ$G$é€šé“æ ‡è®°äº†é«˜å…‰éƒ¨åˆ†
   - **UPD (20240907):** åŒæ—¶ï¼Œåœ¨ä¸‰å‘¨å¹´ï¼ˆJPï¼‰æ›´æ–°å,$a$é€šé“æŒ‡å®šäº†å…‰æ³½åº¦

![image-20240105081327608](/image-archive-20240105/image-20240105081327608.png)

4. Vertex Color

   - [è™½ç„¶ä¸æ˜¯]()texture mapï¼Œä½†æ˜¯æ”¾è¿™é‡Œè®²ä¼šåˆé€‚ä¸å°‘

![image-20240105180210479](/image-archive-20240105/image-20240105180210479.png)

- è¿™é‡Œåªæœ‰RGé€šé“æœ‰ä¿¡æ¯,çŒœæµ‹ï¼š

  - $R$é€šé“å†³å®šæ˜¯å¦æ¥å—æè¾¹

  - $G$é€šé“å†³å®šé«˜å…‰å¼ºåº¦


### 5. Shader å®ç°

1. é˜´å½± / Diffuse

![image-20240105180740265](/image-archive-20240105/image-20240105180740265.png)

**æ³¨ï¼š** BSDFåº”ä¸ºDiffuse BSDF,æˆªå›¾æš‚æœªæ›´æ–°

è¿™é‡Œå®ç°çš„å³ä¸ºä¸Šæ–‡æ‰€è¿°çš„é˜ˆå€¼é˜´å½±ï¼Œä¸å¤šè¯´äº†

2. Specular 

ç›´æ¥åˆ©ç”¨Specular BSDFçš„è¾“å‡ºå’Œå‰æ–‡æ‰€æåˆ°çš„weightï¼Œmixåˆ°è¾“å‡ºå³å¯

3. Emissive

ç”¨`_H`æè´¨çš„$G$é€šé“å åŠ ï¼Œnodeå¦‚å›¾

![image-20240105183024248](/image-archive-20240105/image-20240105183024248.png)

è‡³æ­¤Shaderéƒ¨åˆ†ä»‹ç»å®Œæ¯•ï¼Œæ•ˆæœå¦‚å›¾

![image-20240105183301304](/image-archive-20240105/image-20240105183301304.png)

![image-20240105183407294](/image-archive-20240105/image-20240105183407294.png)

### 6.æè¾¹

æ¸¸æˆä½¿ç”¨äº†ç»å…¸çš„shell shadingæŠ€æœ¯

- ç»†èŠ‚ä¸Šï¼Œé‡ç°å¦‚å›¾æ•ˆæœçš„è¯... (PV: [æ„›ã—ã¦æ„›ã—ã¦æ„›ã—ã¦](https://www.bilibili.com/video/BV1cP4y1P7TM/)))

![image-20240105183827963](/image-archive-20240105/image-20240105183827963.png)

- å¯è§$1$åŒºåŸŸå¸¦æ˜æ˜¾æè¾¹è€Œ$2$åŒºåŸŸæ²¡æœ‰ï¼Œè§‚å¯Ÿvertex colorï¼š

![image-20240105183943570](/image-archive-20240105/image-20240105183943570.png)

![image-20240105184014817](/image-archive-20240105/image-20240105184014817.png)

è¿™å’Œä¹‹å‰å¯¹æè¾¹åšçš„çŒœæµ‹æ˜¯ä¸€è‡´çš„; $R$â€‹å€¼å†³å®šæ˜¯å¦æè¾¹

æ˜¾ç„¶åœ¨ Blender ä¸­ä½¿ç”¨ Geometry Node å¯ä»¥å¾ˆè½»æ¾åœ°å®ç°è¿™ä¸ªæ•ˆæœ

---


***SEE YOU SPACE COWBOY...***

### References

https://github.com/mos9527/sssekai_blender_io ğŸ‘ˆ æ’ä»¶åœ¨è¿™

https://github.com/KH40-khoast40/Shadekai

https://github.com/KhronosGroup/glTF-Blender-IO

https://github.com/theturboturnip/yk_gmd_io

https://github.com/SutandoTsukai181/yakuza-gmt-blender

https://github.com/UuuNyaa/blender_mmd_tools
